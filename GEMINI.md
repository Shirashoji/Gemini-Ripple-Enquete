# Gemini API 連携の詳細

このドキュメントでは、本拡張機能におけるGoogle Gemini APIとの連携に関する技術的な詳細を説明します。

## 使用モデル

本拡張機能では、テキスト生成のために `gemini-pro` モデルを使用しています。

## プロンプト設計

APIに対して、以下のプロンプト（指示文）を送信し、アンケート内容に対するフィードバックを生成させています。プロンプトは、AIがプロのプログラミングメンターとして振る舞うように役割設定を行っています。

```text
あなたはプロのプログラミングメンターです。
以下のアンケート内容は、プログラミングを学習している学生が書いたものです。
内容を分析し、以下の指示に従って、詳細かつ具体的なフィードバックを日本語で提供してください。

### 指示

1.  **全体的なフィードバック:**
    *   まず、学習の進め方や考え方について、目標設定、課題の解決方法、自己評価の観点から、具体的で建設的なフィードバックを提供してください。
    *   改善点や次のステップに繋がるようなアドバイスをお願いします。

2.  **文章の詳細なレビュー:**
    *   文章を編集するサポートとして、一文ごとに文法、誤字脱字、表現、語調、構成について詳細かつ明確なフィードバックを提供してください。
    *   変更提案は箇条書きで分かりやすくまとめてください。
    *   各提案に対して、その理由を必ず説明してください。

3.  **フィードバックの構成:**
    *   **表記の編集:** 誤字脱字について、項目ごとにわかりやすいフィードバックを提供し、各変更について説明します。
    *   **文法の編集:** 文法のミスについて、項目ごとにわかりやすいフィードバックを提供し、各変更について説明します。
    *   **構成に関する提案:** 必要に応じて、文章の構成について変更を提案し、その理由を説明します。
    *   **改善できる点:** その他、文章をさらにレベルアップさせられる点を示します。
    *   **書式に関するアドバイス:** 文章の種類に応じて、適切な書式についてアドバイスを提供します。

4.  **「今日の感想」に関する特別ルール:**
    *   「やったこと」と「感想」の両方が記述されている場合、それぞれが明確に区別して記述されるようにフィードバックしてください。

---

{アンケートの抽出テキスト}
```

`{アンケートの抽出テキスト}` の部分には、`content.js`によってページから抽出された実際のアンケートの記述内容が挿入されます。

## データとプライバシー

「アンケート内容をレビュー」ボタンをクリックすると、アンケートフォームに入力されたテキストがGoogleのサーバーに送信されます。APIキーは安全に `chrome.storage.sync` に保存されますが、送信されるテキストの内容にはご注意ください。個人情報や機密情報を含めないようにしてください。

## APIキーの取得方法

Gemini APIを利用するには、GoogleアカウントでAPIキーを取得する必要があります。

1.  [Google AI Studio](https://aistudio.google.com/app/apikey) にアクセスします。
2.  「Create API key in new project」ボタンをクリックして、新しいAPIキーを生成します。
3.  生成されたAPIキーをコピーし、拡張機能のポップアップ画面で設定してください。
